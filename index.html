<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hứng Trái Tim Tặng Em</title>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; background-color: #ffe4e1; font-family: 'Arial', sans-serif; }
        #game-container { position: relative; width: 100vw; height: 100vh; }
        canvas { display: block; touch-action: none; }
        #ui { position: absolute; top: 10px; left: 10px; font-size: 20px; color: #ff4d6d; font-weight: bold; pointer-events: none; }
        #win-screen { 
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: white; padding: 20px; border-radius: 15px; text-align: center;
            display: none; box-shadow: 0 0 20px rgba(0,0,0,0.2); width: 80%; z-index: 100;
        }
        h2 { color: #ff4d6d; margin: 0; }
        p { color: #555; }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="ui">Trái tim: <span id="score">0</span></div>
        <div id="win-screen">
            <h2>Em đỉnh quá! ❤️</h2>
            <p>Em đã hứng đủ tình yêu của tui rồi!</p>
            <p>Yêu em nhiều lắm!</p>
            <button onclick="location.reload()" style="padding: 10px 20px; background: #ff4d6d; color: white; border: none; border-radius: 5px;">Chơi lại</button>
        </div>
        <canvas id="canvas"></canvas>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const scoreDisplay = document.getElementById('score');
        const winScreen = document.getElementById('win-screen');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let score = 0;
        let hearts = [];
        let gameActive = true;
        let basket = { x: canvas.width / 2 - 50, y: canvas.height - 80, w: 100, h: 20 };

        function spawnHeart() {
            if(!gameActive) return;
            hearts.push({
                x: Math.random() * (canvas.width - 30),
                y: -50,
                s: Math.random() * 2 + 2, // speed
                sz: Math.random() * 15 + 20 // size
            });
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Vẽ thanh hứng (giỏ)
            ctx.fillStyle = "#ff4d6d";
            ctx.beginPath();
            ctx.roundRect ? ctx.roundRect(basket.x, basket.y, basket.w, basket.h, 10) : ctx.rect(basket.x, basket.y, basket.w, basket.h);
            ctx.fill();
            ctx.fillStyle = "white";
            ctx.font = "bold 12px Arial";
            ctx.textAlign = "center";
            ctx.fillText("GIỎ TÌNH YÊU", basket.x + basket.w/2, basket.y + 15);

            // Vẽ trái tim
            for(let i = hearts.length - 1; i >= 0; i--) {
                let h = hearts[i];
                ctx.font = h.sz + "px Arial";
                ctx.fillText("❤️", h.x, h.y);
                h.y += h.s;

                // Va chạm
                if(h.y > basket.y && h.y < basket.y + basket.h && h.x > basket.x && h.x < basket.x + basket.w) {
                    hearts.splice(i, 1);
                    score++;
                    scoreDisplay.innerText = score;
                    if(score >= 212) {
                        gameActive = false;
                        winScreen.style.display = "block";
                    }
                } else if(h.y > canvas.height) {
                    hearts.splice(i, 1);
                }
            }

            if(gameActive) requestAnimationFrame(draw);
        }

        // Điều khiển
        const move = (e) => {
            let x = e.touches ? e.touches[0].clientX : e.clientX;
            basket.x = x - basket.w / 2;
        };
        window.addEventListener('mousemove', move);
        window.addEventListener('touchmove', (e) => { e.preventDefault(); move(e); }, {passive: false});

        setInterval(spawnHeart, 800);
        draw();
    </script>
</body>
</html>




